<%- include('../partials/header') %>

<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="fw-bold">All Posts</h2>
  <a href="/posts/new" class="btn btn-primary">Create New Post</a>
</div>

<% if (posts.length === 0) { %>
  <div class="alert alert-info">No posts yet. Start by creating one!</div>
<% } %>

<div class="row g-4">
  <% posts.forEach(post => { %>
    <div class="col-md-6 col-lg-4">
      <div class="card h-100 shadow-sm">

        <% if (post.imageUrl) { %>
          <a href="/posts/<%= post.id || post._id %>">
            <img src="<%= post.imageUrl %>" class="card-img-top" alt="Post image" style="object-fit: cover; height: 300px;">
          </a>
        <% } %>

        <div class="card-body d-flex flex-column">
          <h5 class="card-title">By <%= post.author.username || post.author.name %></h5>
          <p class="card-text"><%= post.content.length > 100 ? post.content.substring(0, 100) + '...' : post.content %></p>
          <a href="/posts/<%= post.id || post._id %>" class="btn btn-outline-primary mt-auto">Read More</a>
        </div>

      </div>
    </div>
  <% }) %>
</div>

<%- include('../partials/footer') %>
