<%- include('../partials/header') %>



<div class="card shadow-sm">
  <% if (post.imageUrl) { %>
    <img src="<%= post.imageUrl %>" class="card-img-top mb-3" style="max-height: 400px; object-fit: cover;" alt="Post Image">
  <% } else { %>
    <p class="text-muted text-center mt-3">No image uploaded.</p>
  <% } %>

  <div class="card-body">
    <h4 class="card-title">By <%= post.author.username %></h4>
    <p class="card-text fs-5"><%= post.content %></p>
    <p class="text-muted">Posted on <%= new Date(post.createdAt).toLocaleString() %></p>

    <!-- Likes -->
    <form action="/posts/<%= post.id %>/like" method="POST" class="d-inline">
      <% if (isLikedByCurrentUser) { %>
        <button class="btn btn-danger btn-sm">❤️ Unlike</button>
      <% } else { %>
        <button class="btn btn-outline-danger btn-sm">🤍 Like</button>
      <% } %>
    </form>
    <span class="ms-2"><%= post.likes.length %> like(s)</span>

<!-- Comments -->
<hr>
<h5 class="mt-4">Comments</h5>

<% if (!post.comments || post.comments.length === 0) { %>
  <p class="text-muted">No comments yet.</p>
<% } else { %>
  <ul class="list-group">
    <% post.comments.forEach(comment => { %>
      <li class="list-group-item">
        <strong><%= comment.user.username %>:</strong> <%= comment.text %><br>
        <small class="text-muted"><%= new Date(comment.createdAt).toLocaleString() %></small>
      </li>
    <% }) %>
  </ul>
<% } %>

<!-- Add Comment -->
<form action="/posts/<%= post.id %>/comments" method="POST" class="mt-3">
  <div class="mb-3">
    <textarea name="text" class="form-control" placeholder="Add a comment..." required></textarea>
  </div>
  <button class="btn btn-success btn-sm">Post Comment</button>
</form>

<%- include('../partials/footer') %>







